1.
```sh
sudo docker-compose up -d
```

2.
```sh
touch mongo.conf
```

add
```
net:
  bindIp: 127.0.0.1,192.168.1.100  # Only allow local and specific IP
security:
  authorization: enabled
```

3.
```sh
sudo docker compose mongo-test-client
```

Unsuccessful-connection:
```
2024-10-21T13:45:31.365+0000 E  QUERY    [js] Error: couldn't connect to server mongodb-vulnerable:27017, connection attempt failed: SocketException: Error connecting to mongodb-vulnerable:27017 (172.18.0.2:27017) :: caused by :: Connection refused :
connect@src/mongo/shell/mongo.js:341:17
```

Successful-connection
```
Testing MongoDB connection
MongoDB shell version v4.2.2
connecting to: mongodb://mongodb-vulnerable:27017/?compressors=disabled&gssapiServiceName=mongodb
Implicit session: session { "id" : UUID("bd1a26b2-25e5-4de0-80b1-faa024e58954") }
MongoDB server version: 4.2.2
{
	"authInfo" : {
		"authenticatedUsers" : [
			{
				"user" : "root",
				"db" : "admin"
			}
		],
		"authenticatedUserRoles" : [
			{
				"role" : "root",
				"db" : "admin"
			}
		]
	},
	"ok" : 1
}
```


4.
```sh
docker exec -it mongodb-vulnerable mongo -u root -p password --authenticationDatabase admin
```

5.
```sh
use admin
db.runCommand({ connectionStatus: 1 })
```

```
switched to db admin
```

```
{
	"authInfo" : {
		"authenticatedUsers" : [
			{
				"user" : "root",
				"db" : "admin"
			}
		],
		"authenticatedUserRoles" : [
			{
				"role" : "root",
				"db" : "admin"
			}
		]
	},
	"ok" : 1
}
```


6.
```sh
db.updateUser("root", { roles: [{ role: "readWrite", db: "test" }] })
```

7.
```sh
docker-compose up --force-recreate test-client
```